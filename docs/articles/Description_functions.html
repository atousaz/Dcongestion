<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Description of functions • Dcongestion</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Description of functions">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Dcongestion</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Description_functions.html">Description of functions</a>
    </li>
    <li>
      <a href="../articles/Index.html">Data driven congestion detection</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Description of functions</h1>
            
      
      
      <div class="hidden name"><code>Description_functions.Rmd</code></div>

    </div>

    
    
<p>\begin{abstract} Congestion detection is one of the key steps to reduce delays and associated costs in traffic management. With the increasing usage of GPS base navigation, promising speed data is now available. This study utilizes such extensive historical probe data to detect spatio-temporal congestion by mining historical speed data. The detected congestion were further classified as Recurrent and Non Recurrent Congestion (RC, NRC). This work presents a big data driven expert system for identifying both recurrent and non-recurrent congestion and analyzing the delay and cost associated with them. For this purpose, first normal and anomalous days were classified based on travel rate distribution. Later, we utilized Bayesian change point detection to segment speed signal and detect temporal congestion.In this study, a statistical big data mining methodology is developed and the robustness of the proposed methodology is tested on probe data for 2016 calendar year, in Des Moines region, Iowa, US. The proposed framework is self adaptive because it does not rely on additional information for detecting spatio-temporal congestion. Therefore, it addresses the limits of prior work in NRC detection. The optimum value for congestion percentage threshold is identified by Elbow cut off method. ####Congestion detection with sample data Here we use a sample dataset in our package “dataset” to show the performance of the <strong><em>Congestion_detection</em></strong> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="dt">package =</span> <span class="st">"Dcongestion"</span>, dataset)
visual&lt;-<span class="kw">Congestion_detection</span>(dataset)</code></pre></div>
<p>By loading a preprocessed data with <strong><em>Congestion_detection()</em></strong> function and visualizing the output we can observe the temporal congestions in our datafram. In this particular example we have morning an evening pick traffic hours that has been idenfitied with the proposed framework. #### Loading preprocessed dataset and visualizing the out put</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)
<span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="dt">package =</span> <span class="st">"Dcongestion"</span>, visual)

visual<span class="op">$</span>time1 &lt;-<span class="kw"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(visual<span class="op">$</span>time),<span class="dt">format=</span><span class="st">"%H:%M:%S"</span>)
visual<span class="op">$</span>date1 &lt;-<span class="kw"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(visual<span class="op">$</span>date),<span class="dt">format=</span><span class="st">"%Y-%m-%d"</span>)

<span class="kw">ggplot</span>(<span class="dt">data=</span>visual,<span class="kw">aes</span>(<span class="dt">x=</span>time1,<span class="dt">y=</span><span class="kw"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(date1)))<span class="op">+</span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> visual))<span class="op">+</span><span class="kw">scale_fill_gradient</span>(<span class="dt">low=</span><span class="st">"red"</span>,<span class="dt">high=</span><span class="st">"green"</span>,<span class="dt">na.value=</span><span class="st">"white"</span>)<span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()<span class="op">+</span><span class="kw">ylab</span>(<span class="st">""</span>)<span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">panel.grid =</span> <span class="kw">element_blank</span>() )</code></pre></div>
<p><img src="Description_functions_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>To get a sense of what actual dataset looks like and how the function extracts the congetions we further ploted the actual dataset. #### comparison of actual dataset and function’s out put</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="dt">package =</span> <span class="st">"Dcongestion"</span>, dataset)
dataset<span class="op">$</span>time1 &lt;-<span class="kw"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(dataset<span class="op">$</span>time),<span class="dt">format=</span><span class="st">"%H:%M:%S"</span>)
dataset<span class="op">$</span>date1 &lt;-<span class="kw"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(dataset<span class="op">$</span>date),<span class="dt">format=</span><span class="st">"%Y-%m-%d"</span>)

<span class="kw">ggplot</span>(<span class="dt">data=</span>dataset,<span class="kw">aes</span>(<span class="dt">x=</span>time1,<span class="dt">y=</span><span class="kw"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(date1)))<span class="op">+</span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Speed))<span class="op">+</span><span class="kw">scale_fill_gradient</span>(<span class="dt">low=</span><span class="st">"red"</span>,<span class="dt">high=</span><span class="st">"green"</span>,<span class="dt">na.value=</span><span class="st">"white"</span>)<span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()<span class="op">+</span><span class="kw">ylab</span>(<span class="st">""</span>)<span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">panel.grid =</span> <span class="kw">element_blank</span>() )</code></pre></div>
<p><img src="Description_functions_files/figure-html/setup-1.png" width="700"></p>
<p>As green colour refers to normal speed flow while red colour refers to reduced speed values. By comparing the above <strong><em>Congestion_detection</em></strong> function out put and actual dataset we can that temporal congestions has been identified.</p>
<p>We can further calculate the delay associated to congestions by <strong><em>delay()</em></strong> function. #### Delay calculation</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Dcongestion<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/Dcongestion/man/delay.html">delay</a></span>(visual,<span class="fl">0.6</span>)
<span class="co">#&gt; [1] 1.898703</span></code></pre></div>
<p>In order to identify and classify detected congestions to Recurrent and non-recurrent. We use an elbow cut of method on the congestion labeled data points. cut of point can be calculated by <strong><em>elbow_finder()</em></strong> function.</p>
<div id="elbow-cut-off-theshold-calculation" class="section level4">
<h4 class="hasAnchor">
<a href="#elbow-cut-off-theshold-calculation" class="anchor"></a>Elbow cut off theshold calculation</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
r&lt;-<span class="kw"><a href="../reference/elbow_viusal.html">elbow_viusal</a></span>(visual)</code></pre></div>
<p><strong><em>elbow_finder()</em></strong> function was used to calculate the probabilities associated to each time instance. Here we use a preprocessed dataset “r” in order to show the probabilities plot and elbow plot. ####Elbow cut off visualization</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)
<span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="dt">package =</span> <span class="st">"Dcongestion"</span>, r)

sorted_percentages &lt;-<span class="st"> </span>r <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(con_percentage))
<span class="kw">ggplot</span>(<span class="dt">data=</span>r,<span class="kw">aes</span>(<span class="dt">x=</span>time1, <span class="dt">y=</span>con_percentage))<span class="op">+</span><span class="kw">geom_line</span>()<span class="op">+</span><span class="kw">ggtitle</span>(<span class="st">'Congestion probabilities'</span>)</code></pre></div>
<p><img src="Description_functions_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
ordered_data &lt;-<span class="st"> </span>sorted_percentages <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">id =</span> <span class="kw">row_number</span>())
<span class="kw">ggplot</span>(<span class="dt">data=</span>ordered_data,<span class="kw">aes</span>(<span class="dt">x=</span>id, <span class="dt">y=</span>con_percentage))<span class="op">+</span><span class="kw">geom_line</span>()<span class="op">+</span><span class="kw">ggtitle</span>(<span class="st">'Elbow plot of pribabilities'</span>)</code></pre></div>
<p><img src="Description_functions_files/figure-html/unnamed-chunk-6-2.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
el_thre &lt;-<span class="st"> </span>Dcongestion<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/Dcongestion/man/elbow_finder.html">elbow_finder</a></span>(ordered_data[, <span class="dv">5</span>], ordered_data[, <span class="dv">1</span>])
<span class="kw">ggplot</span>(<span class="dt">data=</span>ordered_data,<span class="kw">aes</span>(<span class="dt">x=</span>id, <span class="dt">y=</span>con_percentage))<span class="op">+</span><span class="kw">geom_line</span>()<span class="op">+</span><span class="st"> </span><span class="kw">geom_hline</span>(<span class="dt">yintercept=</span>el_thre[<span class="dv">2</span>], <span class="dt">linetype=</span><span class="st">"dashed"</span>, <span class="dt">color =</span> <span class="st">"red"</span>, <span class="dt">size=</span><span class="dv">2</span>)<span class="op">+</span><span class="kw">ggtitle</span>(<span class="st">'Elbow plot of pribabilities and cut off point'</span>)</code></pre></div>
<p><img src="Description_functions_files/figure-html/unnamed-chunk-6-3.png" width="700"> The cut off red line shows the cut off point. That is our theshold that identifies recurrent congestions that have a probability higher than an identified threshold value. The values below threshold value are considered as non recurrent and values higher than threshold are considered as recurrent.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Zahra Khoshmanesh.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
